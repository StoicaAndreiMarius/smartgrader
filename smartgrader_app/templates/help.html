{% extends 'base.html' %}

{% block title %}Help - SmartGrader{% endblock %}

{% block content %}
<style>
    .help-container {
        max-width: 1000px;
        margin: 50px auto;
        padding: 30px;
    }

    .help-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .help-header h1 {
        color: #fff;
        font-size: 2.5em;
        margin-bottom: 10px;
    }

    .help-header p {
        color: #aaa;
        font-size: 1.2em;
    }

    .help-section {
        background: #2a2a2a;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    .help-section h2 {
        color: #4CAF50;
        font-size: 1.8em;
        margin-bottom: 20px;
        border-bottom: 2px solid #444;
        padding-bottom: 10px;
    }

    .help-section h3 {
        color: #fff;
        font-size: 1.3em;
        margin-top: 20px;
        margin-bottom: 15px;
    }

    .help-section p, .help-section li {
        color: #ccc;
        line-height: 1.8;
        margin-bottom: 12px;
    }

    .help-section ol, .help-section ul {
        margin-left: 20px;
    }

    .help-section code {
        background: #1c1c1c;
        color: #4CAF50;
        padding: 2px 8px;
        border-radius: 4px;
        font-family: monospace;
    }

    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .feature-card {
        background: #333;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #4CAF50;
    }

    .feature-card h4 {
        color: #fff;
        margin-bottom: 10px;
        font-size: 1.1em;
    }

    .feature-card p {
        color: #aaa;
        font-size: 0.95em;
        margin: 0;
    }

    .faq-item {
        background: #333;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 15px;
    }

    .faq-question {
        color: #fff;
        font-size: 1.1em;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .faq-answer {
        color: #ccc;
        line-height: 1.6;
    }
</style>

<div class="help-container">
    <div class="help-header">
        <h1>SmartGrader Help</h1>
        <p>Everything you need to know about using SmartGrader</p>
    </div>

    <!-- For Teachers -->
    <div class="help-section">
        <h2>For Teachers</h2>

        <h3>Creating a Test</h3>
        <ol>
            <li>Click on "Test Generator" in the navigation menu</li>
            <li>Choose how to create your test:
                <ul>
                    <li><strong>Manual Entry:</strong> Add questions one by one</li>
                    <li><strong>JSON Import:</strong> Upload a pre-formatted JSON file</li>
                    <li><strong>AI Generation:</strong> Let Claude generate questions based on your topic</li>
                </ul>
            </li>
            <li>Configure test settings (number of options, grading mode, etc.)</li>
            <li>Click "Save Test"</li>
            <li>Optionally, generate a PDF for printing</li>
        </ol>

        <h3>Sharing a Test with Students</h3>
        <ol>
            <li>Go to your test detail page</li>
            <li>In the "Student Access" panel, click "Generate Share Code"</li>
            <li>Copy the share link or share code</li>
            <li>Ensure "Submissions Open" toggle is turned ON (green)</li>
            <li>Share the link or code with your students</li>
        </ol>

        <h3>Uploading Answer Sheets (Teacher Grading)</h3>
        <ol>
            <li>Collect physical answer sheets from students</li>
            <li>Scan or photograph the answer sheets</li>
            <li>Go to your test detail page</li>
            <li>Drag and drop images or upload a ZIP file containing all scans</li>
            <li>Wait for automatic processing and grading</li>
            <li>Review results and export to CSV if needed</li>
        </ol>

        <h3>Managing Submissions</h3>
        <ul>
            <li><strong>View Results:</strong> Click on any submission to see detailed breakdown</li>
            <li><strong>Export Data:</strong> Use "Export CSV" to download all results</li>
            <li><strong>Update Names:</strong> Edit student names for teacher-uploaded submissions</li>
            <li><strong>Close Submissions:</strong> Toggle off "Submissions Open" to prevent new student submissions</li>
        </ul>
    </div>

    <!-- For Students -->
    <div class="help-section">
        <h2>For Students</h2>

        <h3>Joining a Test</h3>
        <ol>
            <li>Get the test code from your teacher</li>
            <li>Log in to SmartGrader</li>
            <li>Go to Student Dashboard</li>
            <li>Enter the test code in the input field</li>
            <li>Click "Join Test"</li>
        </ol>

        <h3>Submitting Your Answers</h3>
        <ol>
            <li>Complete your answer sheet by filling in the bubbles</li>
            <li>Scan or take a clear photo of your completed answer sheet</li>
            <li>On the test page, drag and drop your image or click to upload</li>
            <li>Preview your image to ensure it's clear</li>
            <li>Click "Submit Answer Sheet"</li>
            <li>Wait for automatic grading (usually takes a few seconds)</li>
        </ol>

        <h3>Viewing Your Results</h3>
        <p>After submission, you'll immediately see:</p>
        <ul>
            <li>Your total score and percentage</li>
            <li>Your letter grade (A, B, C, D, or F)</li>
            <li>Question-by-question breakdown showing:
                <ul>
                    <li>Your answer vs. correct answer</li>
                    <li>Which questions you got right/wrong</li>
                </ul>
            </li>
            <li>Your submitted answer sheet image</li>
        </ul>
    </div>

    <!-- Technical Information -->
    <div class="help-section">
        <h2>Technical Information</h2>

        <h3>Supported Image Formats</h3>
        <ul>
            <li>PNG (.png)</li>
            <li>JPEG (.jpg, .jpeg)</li>
            <li>BMP (.bmp)</li>
            <li>Maximum file size: 10 MB per image</li>
        </ul>

        <h3>OMR (Optical Mark Recognition)</h3>
        <p>SmartGrader uses advanced computer vision to automatically detect filled bubbles on answer sheets. For best results:</p>
        <ul>
            <li>Use clear, well-lit photos or scans</li>
            <li>Ensure the entire answer sheet is visible</li>
            <li>Avoid shadows or glare</li>
            <li>Fill bubbles completely and darkly</li>
            <li>Keep the sheet as flat as possible</li>
        </ul>

        <h3>Grading Modes</h3>
        <ul>
            <li><strong>All or Nothing:</strong> You must mark all correct answers and no incorrect ones to get the point</li>
            <li><strong>Partial Credit:</strong> You get proportional credit based on how many correct answers you marked, with penalties for incorrect marks</li>
        </ul>
    </div>

    <!-- Features -->
    <div class="help-section">
        <h2>Key Features</h2>
        <div class="feature-grid">
            <div class="feature-card">
                <h4>AI Question Generation</h4>
                <p>Let Claude AI generate questions based on your specified topic and difficulty level</p>
            </div>
            <div class="feature-card">
                <h4>Automatic Grading</h4>
                <p>OMR technology automatically detects and grades answer sheets in seconds</p>
            </div>
            <div class="feature-card">
                <h4>Multiple Answer Support</h4>
                <p>Questions can have multiple correct answers with partial credit grading</p>
            </div>
            <div class="feature-card">
                <h4>Instant Results</h4>
                <p>Students see their scores immediately after submission</p>
            </div>
            <div class="feature-card">
                <h4>PDF Generation</h4>
                <p>Generate printable test PDFs with QR codes and bubble sheets</p>
            </div>
            <div class="feature-card">
                <h4>CSV Export</h4>
                <p>Export all results to CSV with statistics for further analysis</p>
            </div>
        </div>
    </div>

    <!-- FAQ -->
    <div class="help-section">
        <h2>Frequently Asked Questions</h2>

        <div class="faq-item">
            <div class="faq-question">Q: Can students submit multiple times?</div>
            <div class="faq-answer">A: This depends on the test settings configured by the teacher. If "Allow Multiple Submissions" is enabled, students can submit more than once.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question">Q: What if the OMR doesn't detect my answers correctly?</div>
            <div class="faq-answer">A: Ensure your answer sheet photo is clear, well-lit, and shows the entire sheet. If problems persist, contact your teacher who can manually upload a better quality scan.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question">Q: Can I change my answers after submission?</div>
            <div class="faq-answer">A: No, once submitted, answers cannot be changed. However, if multiple submissions are allowed, you can submit again.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question">Q: How secure are share codes?</div>
            <div class="faq-answer">A: Share codes are 12-character cryptographically secure random strings with over 60 bits of entropy, making them extremely difficult to guess.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question">Q: Can teachers see who submitted what?</div>
            <div class="faq-answer">A: Yes, teachers can see all submissions linked to student accounts, including scores and answer breakdowns.</div>
        </div>
    </div>

    <!-- Support -->
    <div class="help-section">
        <h2>Need More Help?</h2>
        <p>If you can't find what you're looking for, please:</p>
        <ul>
            <li>Check the <a href="{% url 'information' %}" style="color: #4CAF50;">Information & About</a> page</li>
            <li>Contact your system administrator</li>
            <li>Report issues on our GitHub repository</li>
        </ul>
    </div>
</div>
{% endblock %}
