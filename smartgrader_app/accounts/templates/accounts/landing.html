{% extends 'base.html' %}

{% block content %}
<main style="display: flex; flex-grow: 1; flex-direction: column; font-family: 'Inter', sans-serif; position: relative; width: 100%;">

    <style>
        /* --- FIX PENTRU SCROLL ORIZONTAL AL PAGINII --- */
        html, body {
            max-width: 100%;
            overflow-x: hidden !important; /* Oprește scroll-ul paginii */
            margin: 0;
        }

        /* --- GENERAL LAYOUT --- */
        .landing-container {
            width: 100%;
            max-width: 100vw; /* Asigură că nu depășește ecranul */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding-top: 80px;
            padding-bottom: 40px;
            overflow-x: hidden; /* Dublă siguranță */
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            max-width: 800px;
            padding: 0 20px;
            margin-bottom: 40px;
            z-index: 2;
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 700;
            color: #6ee7b7;
            margin: 0 0 1rem 0;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: #4a5f56;
            margin: 0 0 2rem 0;
        }

        /* Butoane CTA */
        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .btn-login { background-color: #000; color: #fff; border: 1px solid #000; }
        .btn-create { color: #666; background: rgba(0,0,0,0.2); border: 1px solid #333; }


        /* --- CARUSEL STYLES --- */
        .carousel-container {
            position: relative;
            width: 100%;
            /* Aceasta este linia critică pentru a opri scroll-ul paginii */
            overflow: hidden; 
            padding: 0 0 20px 0;
        }

        .cards-wrapper {
            display: flex;
            gap: 20px;
            padding: 20px 20px; /* Padding pentru umbre */
            
            /* AICI permitem scroll-ul, doar în acest element */
            overflow-x: auto; 
            scroll-snap-type: x mandatory; 
            scroll-behavior: smooth;
            
            /* Ascunde scrollbar-ul */
            -ms-overflow-style: none; scrollbar-width: none;
        }
        .cards-wrapper::-webkit-scrollbar { display: none; }

        .card {
            flex: 0 0 300px;
            height: 400px;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            scroll-snap-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        
        @media (min-width: 768px) { .card { flex: 0 0 350px; } }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }
        
        .card:hover .card-image { opacity: 1; }

        /* Culori Fallback */
        .card-1 { background-color: #bce3d6; }
        .card-2 { background-color: #fccba7; }
        .card-3 { background-color: #b5c7ff; }
        .card-4 { background-color: #dcf5b0; }

        /* Navigare */
        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.6); border: none; color: white;
            width: 40px; height: 40px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; cursor: pointer; z-index: 10;
            font-size: 1.2rem; transition: opacity 0.3s;
            opacity: 0;
        }
        .carousel-container:hover .nav-btn { opacity: 1; }
        .prev-btn { left: 10px; }
        .next-btn { right: 10px; }

    </style>

    <div class="landing-container">
        
        <div class="hero-section">
            <h1 class="hero-title">SmartGrader</h1>
            <p class="hero-subtitle">The test grading system designed with students and professors in mind.</p>
            
            {% if not request.user.is_authenticated %}
                <div class="cta-buttons">
                    <a href="#" class="btn btn-login">Login</a>
                    <a href="#" class="btn btn-create">Create Account</a>
                </div>
            {% endif %}
        </div>

        <div class="carousel-container">
            <button class="nav-btn prev-btn" onclick="manualScroll(-1)">&#10094;</button>
            <button class="nav-btn next-btn" onclick="manualScroll(1)">&#10095;</button>
            
            <div class="cards-wrapper" id="cardCarousel">
                <div class="card card-1"><img src="https://picsum.photos/id/20/350/400" class="card-image"></div>
                <div class="card card-2"><img src="https://picsum.photos/id/1/350/400" class="card-image"></div>
                <div class="card card-3"><img src="https://picsum.photos/id/160/350/400" class="card-image"></div>
                <div class="card card-4"><img src="https://picsum.photos/id/180/350/400" class="card-image"></div>
                <div class="card card-1"><img src="https://picsum.photos/id/20/350/400" class="card-image"></div>
                <div class="card card-2"><img src="https://picsum.photos/id/1/350/400" class="card-image"></div>
                <div class="card card-3"><img src="https://picsum.photos/id/160/350/400" class="card-image"></div>
                <div class="card card-4"><img src="https://picsum.photos/id/180/350/400" class="card-image"></div>
                <div class="card card-4"><img src="https://picsum.photos/id/180/350/400" class="card-image"></div>
                <div class="card card-1"><img src="https://picsum.photos/id/20/350/400" class="card-image"></div>
                <div class="card card-2"><img src="https://picsum.photos/id/1/350/400" class="card-image"></div>
                <div class="card card-3"><img src="https://picsum.photos/id/160/350/400" class="card-image"></div>

            </div>
        </div>

    </div>

    <script>
        const container = document.getElementById('cardCarousel');
        let autoScrollInterval;
        const scrollDelay = 1000; 

        function startAutoScroll() {
            if (autoScrollInterval) clearInterval(autoScrollInterval);
            autoScrollInterval = setInterval(() => {
                if (container.scrollLeft + container.clientWidth >= container.scrollWidth - 50) {
                    container.scrollTo({ left: 0, behavior: 'auto' });
                } else {
                    container.scrollBy({ left: 320, behavior: 'smooth' });
                }
            }, scrollDelay);
        }

        function stopAutoScroll() {
            if (autoScrollInterval) {
                clearInterval(autoScrollInterval);
                autoScrollInterval = null;
            }
        }

        function manualScroll(direction) {
            container.scrollBy({ left: direction * 320, behavior: 'smooth' });
        }

        startAutoScroll();
        container.addEventListener('mouseenter', stopAutoScroll);
        container.addEventListener('mouseleave', startAutoScroll);
        container.addEventListener('touchstart', stopAutoScroll, { passive: true });
        container.addEventListener('touchend', () => setTimeout(startAutoScroll, 2000));
    </script>

</main>
{% endblock %}